<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-touch-startup-image" href="./assets/interface/startup.png">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

<!-- css -->
<link rel="stylesheet" type="text/css" href="./css/main.css"/>
<link rel="stylesheet" type="text/css" href="./css/touch.css"/>
<link rel="stylesheet" type="text/css" href="./css/interface.css"/>

<!-- utilities -->
<script src="./js/touch.js"></script>
<script src="./js/util.js"></script>

<!-- interface -->
<script src="./js/interface.js"></script>
<script src="./js/usernotify.js"></script>

<style>
#start_screen {
position:absolute;
left:0;
top:0;
right:0;
bottom:0;
background-color:#5672b7;
}
/* ground */
#start_screen:before {
content:'';
display:block;
position:absolute;
left:0;
right:150px;
bottom:0;
height:80px;
background-image:url('./assets/interface/start_screen.png');
background-position:100% -740px;
background-repeat:no-repeat;
}
/* tree */
#start_screen:after {
content:'';
position:absolute;
right:0;
bottom:0;
width:500px;
height:740px;
max-width:50%;
background-image:url('./assets/interface/start_screen.png');
background-position:-1040px 0px;
}
.start_screen_content {
position:absolute;
left:0;
top:0;
right:0;
bottom:0;
margin:auto;
max-width:1070px;
max-height:600px;
}
.logo {
position:relative;
left:120px;
width:540px;
height:160px;
background-image:url('./assets/interface/start_screen.png');
background-position:-500px -160px;
}
#start_characters {
position:absolute;
left:-100%;
bottom:40px;
width:620px;
height:420px;
z-index:10;

transition:1s left ease;
-webkit-transition:1s left ease;
-moz-transition:1s left ease;
-ms-transition:1s left ease;
-o-transition:1s left ease;
}
#start_characters:after {
content:'';
display:block;
position:absolute;
left:0;
bottom:0;
width:620px;
height:420px;
background-image:url('./assets/interface/start_screen.png');
background-position:-420px -320px;
}
#start_characters.in {
left:10px;
}
#start_characters .start_characters_content {
display:block;
overflow:hidden;
position:relative;
left:100px;
top:350px;
width:480px;
height:0px;

font-family:Monaco,Menlo,monospace;
font-size:16px;
color:#ffffff;

transition:.4s top ease, .4s height ease;
-webkit-transition:.4s top ease, .4s height ease;
}
#start_characters.in.show .start_characters_content {
top:50px;
height:310px;
}
#start_characters.in.show.raise .character-menu,
#start_characters.in.show.raise table.character-table {
position:relative;
z-index:101;
}
.start_characters_content .character-menu{
display:block;
padding:0 10px;
height:60px;
line-height:60px;
font-size:28px;
}
.start_characters_content .character-table-shadow {
position:absolute;
top:60px;
right:0;
left:0;
bottom:0;
background:rgba(0,0,0,0.1);
}
.start_characters_content table.character-table {
overflow-x:hidden;
overflow-y:scroll;
width:440px;
max-height:220px;
text-align:left;
line-height:28px;
color:#ffffff;
border-collapse:collapse;
margin:10px 20px 0 20px;
cursor:default;
}
table.character-table tbody tr:active,
table.character-table tbody tr.active{
background:rgba(0,0,0,0.1);
}
table.character-table td,
table.character-table th {
padding:4px 16px;
}
table.character-table thead {
color:rgba(255,255,255,0.5);
font-size:14px;
}
table.character-table td:not(:first-child),
table.character-table th:not(:first-child) {
text-align:right;
}
.start_characters_content .character-ctrls {
display:none;
position:absolute;
left:0;
right:0;
bottom:0;
z-index:101;
height:34px;
padding:8px 24px;
margin-top:10px;
}
.start_characters_content .character-ctrls.show {
display:block;
}
.character-ctrls .char-ctrl {
height:28px;
line-height:26px;
width:100px;
border:3px solid #ffffff;
border-radius:5px;
background:#888888;
text-align:center;
cursor:default;

box-shadow:2px 2px 0 rgba(0,0,0,0.1);
-webkit-box-shadow:2px 2px 0 rgba(0,0,0,0.1);
-moz-box-shadow:2px 2px 0 rgba(0,0,0,0.1);
-ms-box-shadow:2px 2px 0 rgba(0,0,0,0.1);
-o-box-shadow:2px 2px 0 rgba(0,0,0,0.1);
}
.character-ctrls .char-ctrl.delete-character {
float:left;
background:#aa6666;
}
.character-ctrls .char-ctrl.load-character {
float:right;
background:#66aa66;
}
.character-ctrls .char-ctrl.delete-character:active {
background:#884444;
border-color:#cccccc;
}
.character-ctrls .char-ctrl.load-character:active {
background:#448844;
border-color:#cccccc;
}

/* mobile styles */
body.mobile #start_screen:before {
right:75px;
height:40px;
background-size:770px auto;
background-position:100% -370px;
}
body.mobile #start_screen:after {
width:200px;
height:370px;
background-size:770px auto;
background-position:-520px 0;
}
body.mobile .start_screen_content {
max-width:570px;
max-height:300px;
}
body.mobile .logo {
left:60px;
width:270px;
height:80px;
background-size:770px auto;
background-position:-250px -80px;
}
body.mobile #start_characters {
bottom:20px;
width:310px;
height:210px;

width:360px;
}
body.mobile #start_characters:after {
width:310px;
height:210px;
background-size:770px auto;
background-position:-210px -160px;
}
body.mobile #start_characters.in {
left:5px;
}
body.mobile #start_characters .start_characters_content {
left:50px;
top:175px;
width:240px;
/* font-size not changed yet */
font-size:16px;

font-size:12px;
width:310px;
}
body.mobile #start_characters.in.show .start_characters_content {
top:25px;
height:155px;

top:5px;
height:175px;
}
body.mobile .start_characters_content .character-menu{
padding:0 5px;
height:30px;
line-height:30px;
/* font-size not changed yet */
font-size:28px;

font-size:18px;
}
body.mobile .start_characters_content .character-table-shadow {
top:30px;
}
body.mobile .start_characters_content table.character-table {
width:220px;
max-height:110px;
/* line-height not changed yet */
line-height:28px;
margin:5px 10px 0 10px;

width:290px;
line-height:18px;
font-size:10px;
}
body.mobile table.character-table td,
body.mobile table.character-table th {
padding:2px 8px;
}
body.mobile table.character-table thead {
/* font-size not changed yet */
font-size:14px;

font-size:10px;
}
body.mobile .start_characters_content .character-ctrls {
height:17px;
padding:4px 12px;
margin-top:5px;
/* font-size not changed yet */
font-size:16px;

font-size:12px;
padding:0px 12px;
margin-top:0;
height:26px;
bottom:2px;
}
body.mobile .character-ctrls .char-ctrl {
height:14px;
line-height:13px;
width:50px;
border-width:2px;
border-radius:3px;

height:20px;
line-height:20px;
width:80px;
}

</style>
<script>
window.addEventListener('load', function (ev){
	
	var start_char = document.getElementById('start_characters'),
		char_table = start_char.querySelector('.character-table'),
		char_ctrls = start_char.querySelector('.character-ctrls'),
		active_char;
	
	char_table.addEventListener('click', function (ev){
		var target = ev.target || ev.targetElement || ev.srcElement,
			char_id;
		
		while(target && target.nodeName != 'TR'){
			target = target.parentNode;
			if(!target || target === char_table || !target.nodeName) return;
		}
		
		char_id = target.getAttribute('data-char-id');
		
		if(active_char){
			active_char.classList.remove('active');
		}
		
		if(!char_id){
			char_ctrls.classList.remove('show');
			return;
		}
		
		target.classList.add('active');
		active_char = target;
		
		char_ctrls.setAttribute('data-char-id', char_id);
		
		char_ctrls.classList.add('show');
		
	});
	
	char_ctrls.addEventListener('click', function (ev){
		var target = ev.target || ev.targetElement || ev.srcElement,
			char_id = char_ctrls.getAttribute('data-char-id'),
			action;
		
		if(!char_id) return;
		
		while(target && !target.classList.contains('char-ctrl')){
			target = target.parentNode;
			if(!target || target === char_ctrls || !target.classList) return;
		}
		
		action = target.getAttribute('data-char-act');
		
		if(action == 'delete'){
			
			console.log('deleted character: '+ char_id);
			
		}else if(action == 'load'){
			
			console.log('loading character: '+ char_id);
			
		}
		
	});
	
	setTimeout(function (){
		start_char.classList.add('in');
		setTimeout(function (){
			start_char.classList.add('show');
			setTimeout(function (){
				start_char.classList.add('raise');
			}, 400);
		}, 1000);
	}, 0);
	
});
</script>

<div id="start_screen">
	<div class="start_screen_content">
		<div class="logo"></div>
		<div id="start_characters">
			<div class="start_characters_content">
				<div class="character-menu">characters</div>
				<div class="character-table-shadow"></div>
				<table class="character-table">
					<thead>
						<tr> <th>name</th> <th>lvl</th> <th>time</th> </tr>
					</thead>
					<tbody>
						<tr data-char-id="1"> <td>Character Name 1</td> <td>52</td> <td>21:32</td> </tr>
						<tr data-char-id="2"> <td>Character Name 2</td> <td>17</td> <td>4:16</td> </tr>
						<tr data-char-id="3"> <td>Character Name 3</td> <td>34</td> <td>5:08</td> </tr>
						<tr data-char-id="4"> <td>Character Name 4</td> <td>6</td> <td>0:57</td> </tr>
					</tbody>
				</table>
				<div class="character-ctrls" data-char-id="">
					<div class="char-ctrl delete-character" data-char-act="delete">delete</div>
					<div class="char-ctrl load-character" data-char-act="load">play</div>
				</div>
			</div>
		</div>
	</div>
</div>